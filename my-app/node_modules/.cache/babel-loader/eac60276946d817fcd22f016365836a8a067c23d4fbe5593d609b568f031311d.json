{"ast":null,"code":"import _objectSpread from\"C:/Users/laup77/PycharmProjects/converter/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/laup77/PycharmProjects/converter/my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"C:/Users/laup77/PycharmProjects/converter/my-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"C:/Users/laup77/PycharmProjects/converter/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/laup77/PycharmProjects/converter/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useCallback,useState,useEffect}from'react';import{useDropzone}from'react-dropzone';import{StyledDropzone,registertheme,Infos,FormatInfos}from\"./RegisterTheme\";import CssBaseline from\"@mui/material/CssBaseline\";import{ThemeProvider}from\"@mui/material/styles\";import Box from\"@mui/material/Box\";import axios from'axios';import{useNavigate}from\"react-router-dom\";import{ChoiceButton}from\"./FinishedTheme\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Register(){var navigate=useNavigate();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),currentFile=_useState2[0],setCurrentFile=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),files=_useState4[0],setFiles=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),fileQueue=_useState6[0],setFileQueue=_useState6[1];var onDrop=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(acceptedFiles){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:acceptedFiles.forEach(function(file){var parts=file.name.split('.');if(parts.length>1){var extension=parts.pop();if(extension!=='Z'&&extension!=='tbl'){alert('Please Drop only tbl or tbl.Z files.');return;// Skip this file\n}}setFiles(function(oldFiles){return[].concat(_toConsumableArray(oldFiles),[file]);});});handleSend();case 2:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}(),[]);useEffect(function(){if(fileQueue.length>0){setCurrentFile(fileQueue[0]);}},[fileQueue]);useEffect(function(){if(fileQueue.length===0&&files.length>0){handleSend();}},[files]);var handleSend=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var formData,response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:formData=new FormData();files.forEach(function(file,index){console.log(file.name);formData.append(\"file\",file);});_context2.prev=2;_context2.next=5;return axios.post(\"http://localhost:3000/upload\",formData,{headers:{'Content-Type':'multipart/form-data'}});case 5:response=_context2.sent;if(response.status===200){console.log(\"Files uploaded successfully\");setFiles([]);navigate(\"/Choice\");}_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](2);console.error(\"Error uploading files: \",_context2.t0);case 12:case\"end\":return _context2.stop();}},_callee2,null,[[2,9]]);}));return function handleSend(){return _ref2.apply(this,arguments);};}();var _useDropzone=useDropzone({onDrop:onDrop}),getRootProps=_useDropzone.getRootProps,getInputProps=_useDropzone.getInputProps,isDragActive=_useDropzone.isDragActive;return/*#__PURE__*/_jsxs(ThemeProvider,{theme:registertheme,children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",flexDirection:\"column\",className:\"app\",children:[/*#__PURE__*/_jsx(ChoiceButton,{variant:\"contained\",color:\"primary\",sx:{width:120,height:40,fontSize:10},onClick:function onClick(){navigate(\"/\");},children:\"Return home\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Infos,{children:\"Please drag and drop data files below:\"}),/*#__PURE__*/_jsx(FormatInfos,{children:\"(Format  .tbl or .tbl.Z)\"}),/*#__PURE__*/_jsx(Box,{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",flexDirection:\"column\",mt:5,children:/*#__PURE__*/_jsxs(StyledDropzone,_objectSpread(_objectSpread({},getRootProps()),{},{children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({},getInputProps())),isDragActive?/*#__PURE__*/_jsx(\"p\",{children:\"Please Drop your files here\"}):/*#__PURE__*/_jsx(\"p\",{children:\"Drag and Drop your files here, or click to select them\"})]}))})]})]})]});}export default Register;","map":{"version":3,"names":["React","useCallback","useState","useEffect","useDropzone","StyledDropzone","registertheme","Infos","FormatInfos","CssBaseline","ThemeProvider","Box","axios","useNavigate","ChoiceButton","jsx","_jsx","jsxs","_jsxs","Register","navigate","_useState","_useState2","_slicedToArray","currentFile","setCurrentFile","_useState3","_useState4","files","setFiles","_useState5","_useState6","fileQueue","setFileQueue","onDrop","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","acceptedFiles","wrap","_callee$","_context","prev","next","forEach","file","parts","name","split","length","extension","pop","alert","oldFiles","concat","_toConsumableArray","handleSend","stop","_x","apply","arguments","_ref2","_callee2","formData","response","_callee2$","_context2","FormData","index","console","log","append","post","headers","sent","status","t0","error","_useDropzone","getRootProps","getInputProps","isDragActive","theme","children","display","alignItems","justifyContent","flexDirection","className","variant","color","sx","width","height","fontSize","onClick","mt","_objectSpread"],"sources":["C:/Users/laup77/PycharmProjects/converter/my-app/src/Register.js"],"sourcesContent":["import React, { useCallback, useState, useEffect } from 'react';\r\nimport { useDropzone } from 'react-dropzone';\r\nimport {StyledDropzone, registertheme, Infos, FormatInfos} from \"./RegisterTheme\";\r\nimport CssBaseline from \"@mui/material/CssBaseline\";\r\nimport {ThemeProvider} from \"@mui/material/styles\";\r\nimport Box from \"@mui/material/Box\";\r\nimport axios from 'axios';\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport {ChoiceButton} from \"./FinishedTheme\";\r\n\r\nfunction Register() {\r\n  const navigate = useNavigate();\r\n  const [currentFile, setCurrentFile] = useState(null);\r\n  const [files, setFiles] = useState([]);\r\n  const [fileQueue, setFileQueue] = useState([]);\r\n\r\n  const onDrop = useCallback(async (acceptedFiles) => {\r\n  acceptedFiles.forEach(file => {\r\n    var parts = file.name.split('.');\r\n    if (parts.length > 1) {\r\n      var extension = parts.pop();\r\n      if (extension !== 'Z' && extension !== 'tbl') {\r\n        alert('Please Drop only tbl or tbl.Z files.');\r\n        return; // Skip this file\r\n      }\r\n    }\r\n    setFiles(oldFiles => [...oldFiles, file]);\r\n  });\r\n  handleSend();\r\n}, []);\r\n\r\n  useEffect(() => {\r\n    if (fileQueue.length > 0) {\r\n      setCurrentFile(fileQueue[0]);\r\n    }\r\n  }, [fileQueue]);\r\n\r\n\r\n  useEffect(() => {\r\n    if(fileQueue.length===0 && files.length > 0){\r\n      handleSend();\r\n    }\r\n  }, [files]);\r\n\r\n\r\n  const handleSend = async () => {\r\n    const formData = new FormData();\r\n\r\n    files.forEach((file, index) => {\r\n      console.log(file.name)\r\n      formData.append(\"file\", file);\r\n    });\r\n\r\n    try {\r\n      const response = await axios.post(\"http://localhost:3000/upload\", formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data'\r\n        }\r\n      });\r\n      if (response.status === 200) {\r\n        console.log(\"Files uploaded successfully\");\r\n        setFiles([]);\r\n        navigate(\"/Choice\");\r\n      }\r\n    } catch(error) {\r\n        console.error(\"Error uploading files: \", error)\r\n      }\r\n    };\r\n\r\n  const {getRootProps, getInputProps, isDragActive} = useDropzone({ onDrop });\r\n\r\n  return (\r\n    <ThemeProvider theme={registertheme}>\r\n      <CssBaseline />\r\n\r\n      <Box display=\"flex\" alignItems=\"center\" justifyContent=\"center\" flexDirection=\"column\" className=\"app\">\r\n        <ChoiceButton variant=\"contained\" color=\"primary\" sx={{\r\n                    width: 120,\r\n                    height: 40,\r\n                    fontSize: 10,\r\n                  }} onClick={() => {\r\n                    navigate(\"/\");\r\n                }}>\r\n                    Return home\r\n                </ChoiceButton>\r\n        <div>\r\n          <Infos>Please drag and drop data files below:</Infos>\r\n          <FormatInfos>(Format  .tbl or .tbl.Z)</FormatInfos>\r\n          <Box display=\"flex\" alignItems=\"center\" justifyContent=\"center\" flexDirection=\"column\" mt={5}>\r\n            <StyledDropzone {...getRootProps()}>\r\n              <input {...getInputProps()} />\r\n              {\r\n                isDragActive ?\r\n                  <p>Please Drop your files here</p> :\r\n                  <p>Drag and Drop your files here, or click to select them</p>\r\n              }\r\n            </StyledDropzone>\r\n          </Box>\r\n\r\n        </div>\r\n      </Box>\r\n\r\n    </ThemeProvider>\r\n  )\r\n}\r\n\r\nexport default Register;"],"mappings":"qrBAAA,MAAO,CAAAA,KAAK,EAAIC,WAAW,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC/D,OAASC,WAAW,KAAQ,gBAAgB,CAC5C,OAAQC,cAAc,CAAEC,aAAa,CAAEC,KAAK,CAAEC,WAAW,KAAO,iBAAiB,CACjF,MAAO,CAAAC,WAAW,KAAM,2BAA2B,CACnD,OAAQC,aAAa,KAAO,sBAAsB,CAClD,MAAO,CAAAC,GAAG,KAAM,mBAAmB,CACnC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAAQC,YAAY,KAAO,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE7C,QAAS,CAAAC,QAAQA,CAAA,CAAG,CAClB,GAAM,CAAAC,QAAQ,CAAGP,WAAW,CAAC,CAAC,CAC9B,IAAAQ,SAAA,CAAsCnB,QAAQ,CAAC,IAAI,CAAC,CAAAoB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7CG,WAAW,CAAAF,UAAA,IAAEG,cAAc,CAAAH,UAAA,IAClC,IAAAI,UAAA,CAA0BxB,QAAQ,CAAC,EAAE,CAAC,CAAAyB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA/BE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IACtB,IAAAG,UAAA,CAAkC5B,QAAQ,CAAC,EAAE,CAAC,CAAA6B,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAvCE,SAAS,CAAAD,UAAA,IAAEE,YAAY,CAAAF,UAAA,IAE9B,GAAM,CAAAG,MAAM,CAAGjC,WAAW,6BAAAkC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAC,SAAAC,QAAOC,aAAa,SAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAC/CL,aAAa,CAACM,OAAO,CAAC,SAAAC,IAAI,CAAI,CAC5B,GAAI,CAAAC,KAAK,CAAGD,IAAI,CAACE,IAAI,CAACC,KAAK,CAAC,GAAG,CAAC,CAChC,GAAIF,KAAK,CAACG,MAAM,CAAG,CAAC,CAAE,CACpB,GAAI,CAAAC,SAAS,CAAGJ,KAAK,CAACK,GAAG,CAAC,CAAC,CAC3B,GAAID,SAAS,GAAK,GAAG,EAAIA,SAAS,GAAK,KAAK,CAAE,CAC5CE,KAAK,CAAC,sCAAsC,CAAC,CAC7C,OAAQ;AACV,CACF,CACAzB,QAAQ,CAAC,SAAA0B,QAAQ,WAAAC,MAAA,CAAAC,kBAAA,CAAQF,QAAQ,GAAER,IAAI,IAAC,CAAC,CAC3C,CAAC,CAAC,CACFW,UAAU,CAAC,CAAC,CAAC,wBAAAf,QAAA,CAAAgB,IAAA,MAAApB,OAAA,GACd,mBAAAqB,EAAA,SAAAzB,IAAA,CAAA0B,KAAA,MAAAC,SAAA,QAAE,EAAE,CAAC,CAEJ3D,SAAS,CAAC,UAAM,CACd,GAAI6B,SAAS,CAACmB,MAAM,CAAG,CAAC,CAAE,CACxB1B,cAAc,CAACO,SAAS,CAAC,CAAC,CAAC,CAAC,CAC9B,CACF,CAAC,CAAE,CAACA,SAAS,CAAC,CAAC,CAGf7B,SAAS,CAAC,UAAM,CACd,GAAG6B,SAAS,CAACmB,MAAM,GAAG,CAAC,EAAIvB,KAAK,CAACuB,MAAM,CAAG,CAAC,CAAC,CAC1CO,UAAU,CAAC,CAAC,CACd,CACF,CAAC,CAAE,CAAC9B,KAAK,CAAC,CAAC,CAGX,GAAM,CAAA8B,UAAU,6BAAAK,KAAA,CAAA3B,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAA0B,SAAA,MAAAC,QAAA,CAAAC,QAAA,QAAA7B,mBAAA,GAAAI,IAAA,UAAA0B,UAAAC,SAAA,iBAAAA,SAAA,CAAAxB,IAAA,CAAAwB,SAAA,CAAAvB,IAAA,SACXoB,QAAQ,CAAG,GAAI,CAAAI,QAAQ,CAAC,CAAC,CAE/BzC,KAAK,CAACkB,OAAO,CAAC,SAACC,IAAI,CAAEuB,KAAK,CAAK,CAC7BC,OAAO,CAACC,GAAG,CAACzB,IAAI,CAACE,IAAI,CAAC,CACtBgB,QAAQ,CAACQ,MAAM,CAAC,MAAM,CAAE1B,IAAI,CAAC,CAC/B,CAAC,CAAC,CAACqB,SAAA,CAAAxB,IAAA,GAAAwB,SAAA,CAAAvB,IAAA,SAGsB,CAAAjC,KAAK,CAAC8D,IAAI,CAAC,8BAA8B,CAAET,QAAQ,CAAE,CAC1EU,OAAO,CAAE,CACP,cAAc,CAAE,qBAClB,CACF,CAAC,CAAC,QAJIT,QAAQ,CAAAE,SAAA,CAAAQ,IAAA,CAKd,GAAIV,QAAQ,CAACW,MAAM,GAAK,GAAG,CAAE,CAC3BN,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC,CAC1C3C,QAAQ,CAAC,EAAE,CAAC,CACZT,QAAQ,CAAC,SAAS,CAAC,CACrB,CAACgD,SAAA,CAAAvB,IAAA,iBAAAuB,SAAA,CAAAxB,IAAA,GAAAwB,SAAA,CAAAU,EAAA,CAAAV,SAAA,aAECG,OAAO,CAACQ,KAAK,CAAC,yBAAyB,CAAAX,SAAA,CAAAU,EAAO,CAAC,0BAAAV,SAAA,CAAAT,IAAA,MAAAK,QAAA,gBAElD,kBAtBG,CAAAN,UAAUA,CAAA,SAAAK,KAAA,CAAAF,KAAA,MAAAC,SAAA,OAsBb,CAEH,IAAAkB,YAAA,CAAoD5E,WAAW,CAAC,CAAE8B,MAAM,CAANA,MAAO,CAAC,CAAC,CAApE+C,YAAY,CAAAD,YAAA,CAAZC,YAAY,CAAEC,aAAa,CAAAF,YAAA,CAAbE,aAAa,CAAEC,YAAY,CAAAH,YAAA,CAAZG,YAAY,CAEhD,mBACEjE,KAAA,CAACR,aAAa,EAAC0E,KAAK,CAAE9E,aAAc,CAAA+E,QAAA,eAClCrE,IAAA,CAACP,WAAW,GAAE,CAAC,cAEfS,KAAA,CAACP,GAAG,EAAC2E,OAAO,CAAC,MAAM,CAACC,UAAU,CAAC,QAAQ,CAACC,cAAc,CAAC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAACC,SAAS,CAAC,KAAK,CAAAL,QAAA,eACpGrE,IAAA,CAACF,YAAY,EAAC6E,OAAO,CAAC,WAAW,CAACC,KAAK,CAAC,SAAS,CAACC,EAAE,CAAE,CAC1CC,KAAK,CAAE,GAAG,CACVC,MAAM,CAAE,EAAE,CACVC,QAAQ,CAAE,EACZ,CAAE,CAACC,OAAO,CAAE,SAAAA,QAAA,CAAM,CAChB7E,QAAQ,CAAC,GAAG,CAAC,CACjB,CAAE,CAAAiE,QAAA,CAAC,aAEH,CAAc,CAAC,cACvBnE,KAAA,QAAAmE,QAAA,eACErE,IAAA,CAACT,KAAK,EAAA8E,QAAA,CAAC,wCAAsC,CAAO,CAAC,cACrDrE,IAAA,CAACR,WAAW,EAAA6E,QAAA,CAAC,0BAAwB,CAAa,CAAC,cACnDrE,IAAA,CAACL,GAAG,EAAC2E,OAAO,CAAC,MAAM,CAACC,UAAU,CAAC,QAAQ,CAACC,cAAc,CAAC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAACS,EAAE,CAAE,CAAE,CAAAb,QAAA,cAC3FnE,KAAA,CAACb,cAAc,CAAA8F,aAAA,CAAAA,aAAA,IAAKlB,YAAY,CAAC,CAAC,MAAAI,QAAA,eAChCrE,IAAA,SAAAmF,aAAA,IAAWjB,aAAa,CAAC,CAAC,CAAG,CAAC,CAE5BC,YAAY,cACVnE,IAAA,MAAAqE,QAAA,CAAG,6BAA2B,CAAG,CAAC,cAClCrE,IAAA,MAAAqE,QAAA,CAAG,wDAAsD,CAAG,CAAC,GAEnD,CAAC,CACd,CAAC,EAEH,CAAC,EACH,CAAC,EAEO,CAAC,CAEpB,CAEA,cAAe,CAAAlE,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}